#!/usr/bin/env ruby

$LOAD_PATH << File.join(__dir__, "..", "lib")
require "mayatideway"

HELP = <<~EOF
  Usage: bin/upload <file.jpg>
EOF

if path = ARGV[0]
  system("jp2a --background=dark --width=100 --border #{path}")
  print "name: "
  name = STDIN.gets.chomp
  print "category: "
  category = STDIN.gets.chomp
  print "description: "
  alt_text = STDIN.gets.chomp
  Mayatideway::Photo.new(
    name: name,
    path: path,
    category: category,
    alt_text: alt_text,
  ).upload
else
  puts HELP
  exit 1
end
